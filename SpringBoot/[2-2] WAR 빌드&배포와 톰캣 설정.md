## ðŸ“Â WAR ë¹Œë“œ&ë°°í¬ì™€ í†°ìº£ ì„¤ì •
### **ðŸ±**Â í”„ë¡œì íŠ¸ ë¹Œë“œ

- í”„ë¡œì íŠ¸ ë¹Œë“œ : `./gradlew build`
- WAR íŒŒì¼ ìƒì„± í™•ì¸ : `build/libs/server-0.0.1-SNAPSHOT.war`
- ì••ì¶• í’€ê¸° í›„ WEB-INF íŒŒì¼ í™•ì¸í•˜ê¸° : `jar -xvf server-0.0.1-SNAPSHOT.war`

### **ðŸ±Â JAR, WAR ê°„ë‹¨ ì†Œê°œ**

- JAR ì†Œê°œ
    - ìžë°”ëŠ” **ì—¬ëŸ¬ í´ëž˜ìŠ¤ì™€ ë¦¬ì†ŒìŠ¤ë¥¼ ë¬¶ì–´ì„œ `JAR` (Java Archive)ë¼ê³  í•˜ëŠ” ì••ì¶• íŒŒì¼ì„** ë§Œë“¤ ìˆ˜ ìžˆë‹¤. ì´ íŒŒì¼ì€ JVM ìœ„ì—ì„œ ì§ì ‘ ì‹¤í–‰ë˜ê±°ë‚˜ ë˜ëŠ” ë‹¤ë¥¸ ê³³ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì œê³µëœë‹¤.
    - ì§ì ‘ ì‹¤í–‰í•˜ëŠ” ê²½ìš° `main()` ë©”ì„œë“œê°€ í•„ìš”í•˜ê³ , `MANIFEST.MF` íŒŒì¼ì— ì‹¤í–‰í•  ë©”ì¸ ë©”ì„œë“œê°€ ìžˆëŠ” í´ëž˜ìŠ¤ë¥¼ ì§€ì •í•´ ë‘ì–´ì•¼ í•œë‹¤.
        - ì‹¤í–‰ ì˜ˆ) `java -jar abc.jar`
    - JarëŠ” ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ í´ëž˜ìŠ¤ì™€ ê´€ë ¨ ë¦¬ì†ŒìŠ¤ë¥¼ ì••ì¶•í•œ ë‹¨ìˆœí•œ íŒŒì¼ì´ë‹¤. í•„ìš”í•œ ê²½ìš° ì´ íŒŒì¼ì„ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ë„ ìžˆê³ , ë‹¤ë¥¸ ê³³ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìžˆë‹¤.
- WAR ì†Œê°œ
    - WAR(Web Application Archive)ë¼ëŠ” ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìžˆë“¯ WAR íŒŒì¼ì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„(WAS)ì— ë°°í¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì´ë‹¤.
    - **JAR íŒŒì¼ì´ JVM ìœ„ì—ì„œ ì‹¤í–‰ëœë‹¤ë©´, WARëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ìœ„ì—ì„œ ì‹¤í–‰ëœë‹¤.**
    - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ìœ„ì—ì„œ ì‹¤í–‰ë˜ê³ , HTML ê°™ì€ ì •ì  ë¦¬ì†ŒìŠ¤ì™€ í´ëž˜ìŠ¤ íŒŒì¼ì„ ëª¨ë‘ í•¨ê»˜ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— JARì™€ ë¹„êµí•´ì„œ êµ¬ì¡°ê°€ ë” ë³µìž¡í•˜ë‹¤. ê·¸ë¦¬ê³  WAR êµ¬ì¡°ë¥¼ ì§€ì¼œì•¼ í•œë‹¤.
- WAR êµ¬ì¡°
    - WEB-INF
        - `classes` : ì‹¤í–‰ í´ëž˜ìŠ¤ ëª¨ìŒ
        - `lib` : ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ìŒ
        - `web.xml` : ì›¹ ì„œë²„ ë°°ì¹˜ ì„¤ì • íŒŒì¼(ìƒëžµ ê°€ëŠ¥)
    - `index.html` : ì •ì  ë¦¬ì†ŒìŠ¤
    - `WEB-INF` í´ë” í•˜ìœ„ëŠ” **ìžë°” í´ëž˜ìŠ¤ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬, ê·¸ë¦¬ê³  ì„¤ì • ì •ë³´**ê°€ ë“¤ì–´ê°€ëŠ” ê³³ì´ë‹¤.
    - `WEB-INF` ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì˜ì—­ì€ **HTML, CSS ê°™ì€ ì •ì  ë¦¬ì†ŒìŠ¤**ê°€ ì‚¬ìš©ë˜ëŠ” ì˜ì—­ì´ë‹¤.

### **ðŸ±Â WAR ë°°í¬**

1. í†°ìº£ ì„œë²„ë¥¼ ì„¤ì¹˜í•œ í´ë”ì˜ bin í´ë”ë¡œ ì´ë™ í›„ í†°ìº£ ì„œë²„ë¥¼ ì¢…ë£Œí•œë‹¤. `./shutdown.sh`

2. `í†°ìº£í´ë”/webapps` í•˜ìœ„ë¥¼ ëª¨ë‘ ì‚­ì œí•œë‹¤.

3. ë¹Œë“œëœ `server-0.0.1-SNAPSHOT.war` ë¥¼ ë³µì‚¬í•œë‹¤.

4. `í†°ìº£í´ë”/webapps` í•˜ìœ„ì— ë¶™ì—¬ë„£ëŠ”ë‹¤.

- `í†°ìº£í´ë”/webapps/server-0.0.1-SNAPSHOT.war`

5. ì´ë¦„ì„ ë³€ê²½í•œë‹¤. `í†°ìº£í´ë”/webapps/ROOT.war`

6. í†°ìº£ ì„œë²„ë¥¼ ì‹¤í–‰í•œë‹¤. `./startup.sh`

- `í†°ìº£í´ë”/bin` í´ë”
    - ì‹¤í–‰: `./startup.sh`
    - ì¢…ë£Œ: `./shutdown.sh`
- ì‹¤í–‰ì„ í•˜ë©´ ROOT.waríŒŒì¼ì„ ì•Œì•„ì„œ ì••ì¶• í•´ì œí•¨
- ê²°ê³¼ í™•ì¸
    - http://localhost:8080/index.html
    - http://localhost:8080/test
    - `í†°ìº£í´ë”/logs/catalina.out` ë¡œê·¸
        
- ì¸í…”ë¦¬Jë‚˜ ì´í´ë¦½ìŠ¤ ê°™ì€ IDEëŠ” ì´ ë¶€ë¶„ì„ íŽ¸ë¦¬í•˜ê²Œ ìžë™í™”í•´ì¤€ë‹¤.

### **ðŸ±Â í†°ìº£ ì„¤ì • (ìœ ë£Œ)**

- ì¢…ë£Œ: `./shutdown.sh`
- ìƒë‹¨Run â†’ Runâ€¦
    - Server: Application serverì„ Tomcatìœ¼ë¡œ ì„¤ì •
    - Deployment: Gradle: ~~~.war(exploded) ì„¤ì • í›„ Application context ì‚­ì œí•˜ê¸°
    
- ì˜¤ë¥˜
    - Execution failed for task ':compileJava'.
    invalid source release: 17
    - í•´ê²° : [https://velog.io/@persestitan/Spring-Cause-error-invalid-source-release-17-í•´ê²°ë°©ë²•-IntelliJ](https://velog.io/@persestitan/Spring-Cause-error-invalid-source-release-17-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95-IntelliJ)
    

### **ðŸ±Â í†°ìº£ ì„¤ì • (ë¬´ë£Œ)**

- War íŒŒì¼ì„ í’€ì–´ì„œ íŠ¹ì • ë””ë ‰í† ë¦¬ì— ì €ìž¥
    
    ```jsx
    //war í’€ê¸°, ì¸í…”ë¦¬J ë¬´ë£Œë²„ì „ í•„ìš”
    task explodedWar(type: Copy) {
        into "$buildDir/exploded"
        with war
    }
    ```
    
    `baki@baghuiwons-MacBook-Pro build % cd ..`
    `baki@baghuiwons-MacBook-Pro server % ./gradlew explodedWar`
    
    build/exploded í´ë”ê°€ ìƒˆë¡œ ìƒì„±ë˜ê³ , ì—¬ê¸°ì— WEB-INF ë¥¼ í¬í•¨í•œ warê°€ í’€ë ¤ ìžˆëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.
    

- Preferencesì—ì„œ Smart Tomcat ì„¤ì¹˜í•˜ê¸°
- ë©”ë‰´ -> Run -> Edit Configurations
<img width="852" alt="image" src="https://github.com/heewon00/TIL_CloudNative/assets/55778040/ac433479-ec2d-46e9-86fb-194d452cb8d7">